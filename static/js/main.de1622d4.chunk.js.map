{"version":3,"sources":["components/Input.js","components/Region.js","components/Winners.js","components/Stats.js","components/UserStats/UserTable.js","components/UserStats/UserStats.js","App.js","serviceWorker.js","index.js"],"names":["Input","_ref","onChange","value","index","placeholder","react_default","a","createElement","className","type","Region","setName","setVariations","setQty","name","variations","qty","src_components_Input","join","Winners","winners","pickWinners","selectWinner","total","method","buttonText","status","length","onClick","map","region","i","key","arr","winner","author","Stats","stats","downloadData","stat","href","target","download","rel","UserTable","headings","data","username","totalComments","heading","obj","domain","count","toFixed","sub","url","account","provider","getCells","UserStats","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","getSubmissions","asyncToGenerator","regenerator_default","mark","_callee","after","resp","json","submissionData","_args","arguments","wrap","_context","prev","next","undefined","queuedUsername","abrupt","fetch","sent","state","push","apply","toConsumableArray","children","setState","analyse","t0","stop","_x","getComments","_ref2","_callee2","commentData","_args2","_context2","_x2","gatherData","_callee3","temp","_context3","lock","clearFullData","domainsSubmittedFrom","subsSubmittedTo","accountsSubmittedFrom","subsCommentedTo","submissionCount","clearArrays","_this$state","ignoreProfile","focusSub","forEach","submission","subreddit","toLowerCase","addSubSubmitted","addDomain","addAccount","comment","addSubCommentedTo","sort","b","existingObj","find","accountLink","media","oembed","author_name","author_url","provider_name","end","replace","indexOf","slice","title","focusCount","_this$state2","setUsername","UserStats_UserTable","Component","App","setUrl","e","currentURL","processBlock","processText","setRegionName","_regions$index$variat","regions","getAttribute","_regions$index$variat2","setRegionVariations","split","val","trim","comments","onComplete","setRegionQty","parseInt","setIgnored","ignoredUsers","addRegion","removeRegion","pop","selectedWinner","percentage","allComments","then","response","kind","array","parseChild","link_id","id","getMoreComments","updatePercentage","string","subArray","shift","idsThisTime","things","splice","child","stringsArr","replies","testValue","conditions","match","condition","testRegions","extras","result","keys","body","values","others","sortComments","previousWinners","duplicates","ignored","parseList","list","hasId","toUpperCase","item","extra","results","encodeURI","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_value","randomNumbers","random","chosen","asyncIterator","done","getRandomNumbers","return","finish","max","requestsLeft","winnersStatus","mode","headers","Content-Type","referrer","JSON","stringify","jsonrpc","params","apiKey","n","min","error","winnersMethod","randomNumberFallback","numbers","Math","includes","_this2","processClass","src_components_Region","src_components_Stats","src_components_Winners","components_UserStats_UserStats","Boolean","window","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.de1622d4.chunk.js","sourcesContent":["import React from 'react';\nimport './Input.css';\n\nconst Input = ({onChange, value, index, placeholder}) => {\n    if (value === 0) value = '';\n    return (\n        <div>\n            <input className=\"input roundedBorder\" type=\"text\" onChange={onChange} value={value} index={index} placeholder={placeholder}/>\n        </div>\n    );\n}\n\nexport default Input;","import React from 'react';\nimport Input from './Input';\nimport './Region.css';\n\nconst Region = ({setName, setVariations, setQty, name, variations, qty, index}) => {\n    return (\n        <div className=\"region\">\n            <Input onChange={setName} value={name} index={index} placeholder='Region'/>\n            <Input onChange={setVariations} value={variations.join(',')} index={index} placeholder='Words to look for'/>\n            <Input onChange={setQty} value={qty} index={index} placeholder='Qty'/>\n        </div>\n    );\n};\n\nexport default Region;","import React from 'react';\nimport './Winners.css';\n\nconst Winners = ({winners, pickWinners, selectWinner, total, method, status}) => {\n    let buttonText = 'Pick Winners';\n    if (status === 0) buttonText = 'Loading...';\n    \n    if (winners.length === 0 && total > 0) {\n        return <div className=\"winners roundedBorder\"><button className=\"button green\" onClick={pickWinners}>{buttonText}</button></div>;\n    } else if (winners.length === 0) {\n        return <div></div>;\n    }\n\n    return (\n        <div className=\"winners roundedBorder\">\n            <button className=\"button green\" onClick={pickWinners}>{buttonText}</button>\n            <p>Method used for random numbers: {method}</p>\n            <label>Winners</label>\n            <div className=\"winnerRegions\">\n                {\n                    winners.map((region, i) => {\n                        return (\n                            <div className=\"winnerRegion roundedBorder\" key={i}>\n                                <label>{region.name}</label>\n                                {\n                                    region.arr.map((winner, i) => {\n                                        return <div key={i} onClick={selectWinner(winner.author)}>{winner.author}</div>\n                                    })\n                                }\n                            </div>\n                        );\n                    })\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Winners;","import React from 'react';\nimport './Stats.css';\n\nconst Stats = ({stats, total, downloadData}) => {\n    if (stats.length === 0) return <div></div>;\n    \n    return (\n        <div className=\"stats roundedBorder\">\n            <label>Stats</label>\n            {\n                stats.map((stat, i) => {\n                    return <div key={i}>{stat.name} - {stat.qty}</div>;\n                })\n            }\n            <div>Total - {total}</div>\n            <a href={\"data:text/csv;charset=utf-8,\"+downloadData} target=\"_blank\" download=\"list.csv\" rel=\"noopener noreferrer\">Download</a>\n        </div>\n    );\n};\n\nexport default Stats;","import React from 'react';\n\nconst UserTable = ({headings, data, type, total, username, totalComments}) => {\n    return (\n        <div className=\"tableDiv\">\n            <table className=\"userTable\">\n                <thead>\n                    <tr>\n                        {\n                            headings.map((heading,i) => <td key={i}>{heading}</td>)\n                        }\n                    </tr>\n                </thead>\n                {\n                    data && data.length > 0 ? (\n                        <tbody>\n                            {\n                                data.map((obj, i) => {\n                                    return getCells(obj, i);\n                                })\n                            }\n                        </tbody>\n                        \n                    ) : <tbody></tbody>\n                }\n            </table>\n        </div>\n    );\n    \n    function getCells(obj, i){\n        if (type === 'domains'){\n            return (\n                <tr key={i}>\n                    <td>{obj.domain}</td>\n                    <td>{obj.count}</td>\n                    <td>{((obj.count/total)*100).toFixed(0)}%</td>\n                </tr>\n            )\n        } else if (type === 'subsSubmitted'){\n            return (\n                <tr key={i}>\n                    <td><a href={\"https://www.reddit.com/r/\"+obj.sub+\"/search?q=author%3A\"+username+\"&restrict_sr=on&sort=new&feature=legacy_search\"} target=\"_blank\" rel=\"noopener noreferrer\">{obj.sub}</a></td>\n                    <td>{obj.count}</td>\n                    <td>{((obj.count/total)*100).toFixed(0)}%</td>\n                </tr>\n            )\n        } else if (type === 'subsCommented'){\n            return (\n                <tr key={i}>\n                    <td>{obj.sub}</td>\n                    <td>{obj.count}</td>\n                    <td>{((obj.count/totalComments)*100).toFixed(0)}%</td>\n                </tr>\n            )\n        } else if (type === 'accounts'){\n            return (\n                <tr key={i}>\n                    <td><a href={obj.url} target=\"_blank\" rel=\"noopener noreferrer\">{obj.account+' - '+obj.provider}</a></td>\n                    <td>{obj.count}</td>\n                    <td>{((obj.count/total)*100).toFixed(0)}%</td>\n                </tr>\n            )\n        } else {\n            return (\n                <tr key={i}></tr>\n            )\n        }\n    }\n};\n\nexport default UserTable;","import React, {Component} from 'react';\nimport './UserStats.css';\nimport UserTable from './UserTable';\n\nclass UserStats extends Component {\n    constructor(props){\n        super();\n        this.state = {\n            //arrays to store all data\n            commentData: [],\n            submissionData: [],\n            \n            submissionCount: 0,\n            \n            username: '',//'gamertag-vr',\n            \n            //option to ignore user profile\n            ignoreProfile: false,\n            \n            //option to focus on a single sub\n            focusSub: '',\n            focusCount: 0,\n            \n            //arrays of objects keeping track of numbers\n            domainsSubmittedFrom: [],\n            subsSubmittedTo: [],\n            accountsSubmittedFrom: [],\n            subsCommentedTo: []\n        }\n        this.lock = false;\n        this.queuedUsername = undefined;\n    }\n    \n    render(){\n        const {domainsSubmittedFrom, subsSubmittedTo, subsCommentedTo, accountsSubmittedFrom, username, submissionCount} = this.state;\n        if (username.length === 0){\n            return (\n                <div></div>\n            );\n        }\n        \n        return (\n            <div className=\"userStats roundedBorder\">\n                <div className=\"closeBtn slim button red roundedBorder\" onClick={this.props.setUsername('')}>X</div>\n                <div className=\"userSummary\">\n                    <h3>Available History for {username}</h3>\n                    <p>{this.state.submissionCount} submissions.</p>\n                    <p>{this.state.commentData.length} comments.</p>\n                </div>\n                <div className=\"userTables\">\n                    <UserTable username={username} headings={['Domains Submitted From', 'Count', '%']} data={domainsSubmittedFrom} type=\"domains\" total={submissionCount} totalComments={this.state.commentData.length}/>\n                    <UserTable username={username} headings={['Subreddit Submitted To', 'Count', '%']} data={subsSubmittedTo} type=\"subsSubmitted\" total={submissionCount} totalComments={this.state.commentData.length}/>\n                    <UserTable username={username} headings={['Subreddit Commented In', 'Count', '%']} data={subsCommentedTo} type=\"subsCommented\" total={submissionCount} totalComments={this.state.commentData.length}/>\n                    <UserTable username={username} headings={['Account Submitted From', 'Count', '%']} data={accountsSubmittedFrom} type=\"accounts\" total={submissionCount} totalComments={this.state.commentData.length}/>\n                </div>\n            </div>\n        )\n    }\n    \n    componentDidUpdate(){\n        if (this.state.username !== this.props.username){\n            if (this.lock){\n                this.queuedUsername = this.props.username;\n                return;\n            } else {\n                this.setState({username: this.props.username}, this.gatherData);\n            }\n        }\n    }\n    \n    componentDidMount(){\n        this.gatherData();\n    }\n    \n    getSubmissions = async (username, after = '') => {\n        if (username.length === 0 || this.queuedUsername) return;\n        try {\n            const resp = await fetch('https://www.reddit.com/user/'+username+'/submitted.json?limit=100&after='+after);\n            const json = await resp.json();\n            \n            const submissionData = this.state.submissionData;\n            submissionData.push(...json.data.children);\n            this.setState({submissionData}, this.analyse);\n            \n            if (json.data.after !== null){\n                await this.getSubmissions(username, json.data.after);\n            }\n        } catch (err) {\n            \n        }\n    }\n    \n    getComments = async (username, after = '') => {\n        if (username.length === 0 || this.queuedUsername) return;\n        try {\n            const resp = await fetch('https://www.reddit.com/user/'+username+'/comments.json?limit=100&after='+after);\n            const json = await resp.json();\n            \n            const commentData = this.state.commentData;\n            commentData.push(...json.data.children);\n            this.setState({commentData}, this.analyse);\n            \n            if (json.data.after !== null){\n                await this.getComments(username, json.data.after);\n            }\n        } catch (err) {\n            \n        }\n    }\n    \n    gatherData = async () => {\n        if (this.lock) return;\n        if (this.state.username.length > 0){\n            this.lock = true;\n            this.clearFullData();\n            \n            await this.getSubmissions(this.state.username);\n            await this.getComments(this.state.username);\n            \n            this.lock = false;\n            if (this.queuedUsername){\n                let temp = this.queuedUsername;\n                this.queuedUsername = undefined;\n                this.setState({username: temp}, this.gatherData);\n            }\n            \n        }\n    }\n    \n    clearFullData = () => {\n        this.setState({commentData: [], submissionData: [], domainsSubmittedFrom: [], subsSubmittedTo: [], accountsSubmittedFrom: [], subsCommentedTo: [], submissionCount: 0});\n    }\n    \n    clearArrays = () => {\n        this.setState({domainsSubmittedFrom: [], subsSubmittedTo: [], accountsSubmittedFrom: [], subsCommentedTo: [], submissionCount: 0});\n    }\n    \n    analyse = () => {\n        this.clearArrays();\n        const {submissionData, commentData, ignoreProfile, username, focusSub} = this.state;\n        \n        let submissionCount = 0;\n        const domainsSubmittedFrom = [];\n        const subsSubmittedTo = [];\n        const accountsSubmittedFrom = [];\n        const subsCommentedTo = [];\n        \n        submissionData.forEach(submission => {\n            let data = submission.data;\n            if (ignoreProfile && data.subreddit.toLowerCase() === 'u_'+username.toLowerCase()) return;\n            submissionCount++;\n            this.addSubSubmitted(data, subsSubmittedTo);\n            if (focusSub.length > 0 && data.subreddit.toLowerCase() !== focusSub.toLowerCase()) return;\n            this.addDomain(data, domainsSubmittedFrom);                    \n            this.addAccount(data, accountsSubmittedFrom);\n        });\n        \n        commentData.forEach(comment => {\n            let data = comment.data;\n            this.addSubCommentedTo(data, subsCommentedTo);\n        });\n        \n        domainsSubmittedFrom.sort((a,b) => b.count-a.count);\n        subsSubmittedTo.sort((a,b) => b.count-a.count);\n        accountsSubmittedFrom.sort((a,b) => b.count-a.count);\n        subsCommentedTo.sort((a,b) => b.count-a.count);\n        \n        this.setState({submissionCount, domainsSubmittedFrom, subsSubmittedTo, accountsSubmittedFrom, subsCommentedTo});\n    }\n    \n    addDomain = (data, domainsSubmittedFrom) => {\n        let domain = data.domain;\n        let existingObj = domainsSubmittedFrom.find(obj => obj.domain === domain);\n        if (existingObj === undefined){\n            domainsSubmittedFrom.push({domain, count:1});\n        } else {\n            existingObj.count++;\n        }\n    }\n    \n    addSubSubmitted = (data, subsSubmittedTo) => {\n        let sub = data.subreddit;\n        let existingObj = subsSubmittedTo.find(obj => obj.sub === sub);\n        if (existingObj === undefined){\n            subsSubmittedTo.push({sub, count:1});\n        } else {\n            existingObj.count++;\n        }\n    }\n    \n    addAccount = (data, accountsSubmittedFrom) => {\n        let account, accountLink, provider;\n        \n        if (data.media && data.media.type === 'youtube.com'){\n            account = data.media.oembed.author_name;\n            accountLink = data.media.oembed.author_url;\n            provider = data.media.oembed.provider_name;\n        } else if (data.domain === 'twitter.com') {\n            account = data.url.replace('https://twitter.com/','');\n            let end = account.indexOf('/');\n            account = account.slice(0, end);\n            accountLink = data.url;\n            provider = 'Twitter';\n        } else if (data.media && data.media.type === 'twitch.tv'){\n            account = data.media.oembed.title.replace(' - Twitch', '');\n            provider = data.media.oembed.provider_name;\n            accountLink = data.url;\n        } else {\n            return;\n        }\n        \n        let existingObj = accountsSubmittedFrom.find(obj => obj.account === account);\n        if (existingObj === undefined){\n            accountsSubmittedFrom.push({account, count:1, url: accountLink, provider});\n        } else {\n            existingObj.count++;\n        }\n    }\n    \n    addSubCommentedTo = (data, subsCommentedTo) => {\n        let sub = data.subreddit;\n        let existingObj = subsCommentedTo.find(obj => obj.sub === sub);\n        if (existingObj === undefined){\n            subsCommentedTo.push({sub, count:1});\n        } else {\n            existingObj.count++;\n        }\n    }\n    \n    \n}\n\nexport default UserStats;","import React, { Component } from 'react';\nimport './App.css';\nimport Input from './components/Input';\nimport Region from './components/Region';\nimport Winners from './components/Winners';\nimport Stats from './components/Stats';\nimport UserStats from './components/UserStats/UserStats';\n\nclass App extends Component {\n    constructor(){\n        super();\n        this.state = {\n            regions: [\n                {name: 'EU', qty: 1, variations: ['EU', 'Eu', 'eU', 'Europe', 'UK']},\n                {name: 'NA', qty: 1, variations: ['NA', 'Na', 'nA', 'North American', 'North America', 'North america', 'north america', 'N.A', 'N A', 'US']},\n                {name: '', qty: 0, variations: []}\n            ],\n            ignoredUsers: [],\n            url: '',\n            winners: [],\n            winnersMethod: 'Random.org',\n            winnersStatus: 1,\n            selectedWinner: '',\n            stats: [],\n            total: 0,\n            processText: 'Process',\n            processBlock: false,\n            downloadData: '',\n            status: 0\n        };\n        \n        this.totalComments = 0;\n        this.results = {};\n        this.comments = [];\n        this.currentURL = '';\n    }\n    \n    render() {    \n        \n        let processClass = 'button green';\n        if (this.state.processBlock) processClass = 'button disabled';\n        \n        return (\n            <div className=\"App\">\n                <h1>Reddit Competition Parser</h1>\n                <div className=\"grid\">\n                    <div className=\"url\">\n                        <label>URL</label>\n                        <div className=\"example\">(Example: https://www.reddit.com/r/PSVR/comments/9gykgl/transference_playstation_vr_game_key_giveaway_we/)</div>\n                        <Input onChange={this.setUrl} value={this.state.url} placeholder='URL'/>\n                    </div>\n                    <div className=\"ignored\">\n                        <label>Users to Ignore</label>\n                        <textarea onChange={this.setIgnored} placeholder=\"Such as previous winners. (Must be separated by a new line)\"></textarea>\n                    </div>\n                    <div className=\"regions\">\n                        <label>\n                            Regions \n                            <span onClick={this.addRegion} className=\"slim button green\">+</span>\n                            <span onClick={this.removeRegion} className=\"slim button red\">-</span>\n                        </label>\n                        {\n                            this.state.regions.map((region, i) => {\n                                return <Region setName={this.setRegionName} setVariations={this.setRegionVariations} setQty={this.setRegionQty} \n                                                name={region.name} variations={region.variations} qty={region.qty} index={i} key={i}/>\n                            })\n                        }\n                    </div>\n                    <div className=\"processBtn\">\n                        <button onClick={this.getComments} className={processClass}>{this.state.processText}</button>\n                    </div>\n                    <Stats stats={this.state.stats} total={this.state.total} downloadData={this.state.downloadData}/>\n                    <Winners winners={this.state.winners} pickWinners={this.pickWinners} selectWinner={this.selectWinner} total={this.state.total} method={this.state.winnersMethod} status={this.state.winnersStatus}/>\n                    <UserStats username={this.state.selectedWinner} setUsername={this.selectWinner}/>\n                </div>\n            </div>\n        );\n    }\n    \n    setUrl = (e) => {\n        this.setState({url: e.target.value});\n        if (e.target.value !== this.currentURL){\n            this.setState({processBlock: false, processText: 'Process'});\n        } else {\n            this.setState({processBlock: true, processText: 'Process'});\n        }\n    }\n    \n    setRegionName = (e) => {\n        const regions = this.state.regions;\n        const index = e.target.getAttribute('index');\n        regions[index].name = e.target.value;\n        \n        //just to make it easier if someone removes a region but then wants it back\n        if (regions[index].variations.length === 0 && regions[index].name === 'NA'){\n            regions[index].variations.push(...['NA', 'Na', 'nA', 'North American', 'North America', 'North america', 'north america', 'N.A', 'N A', 'US']);\n        }\n        \n        else if (regions[index].variations.length === 0 && regions[index].name === 'EU'){\n            regions[index].variations.push(...['EU', 'Eu', 'eU', 'Europe', 'UK']);\n        }\n        \n        this.setState({regions});\n    }\n    \n    setRegionVariations = (e) => {\n        const regions = this.state.regions;\n        const index = e.target.getAttribute('index');\n        regions[index].variations = e.target.value.split(',').map(val => val.trim());\n        this.setState({regions}, () => {\n            if (this.comments.length > 0) this.onComplete(this.comments);\n        });\n    }\n    \n    setRegionQty = (e) => {\n        const regions = this.state.regions;\n        const index = e.target.getAttribute('index');\n        regions[index].qty = parseInt(e.target.value) || '';\n        this.setState({regions});\n    };\n    \n    setIgnored = (e) => {\n        this.setState({ignoredUsers: e.target.value.split('\\n')}, ()=>{\n            if (this.comments.length > 0) this.onComplete(this.comments);\n        });\n    };\n    \n    addRegion = () => {\n        const regions = this.state.regions;\n        regions.push({name: '', qty: 1, variations: []});\n        this.setState({regions});\n    }\n    \n    removeRegion = () => {\n        const regions = this.state.regions;\n        regions.pop();\n        this.setState({regions});\n    }\n    \n    selectWinner = (selectedWinner) => {\n        return () => {\n            this.setState({selectedWinner});\n        };\n    };\n    \n    getComments = () => {\n        if (this.state.url.length === 0 || this.state.status === 1 || this.state.processBlock) return;\n        //get json data from Reddit\n        this.totalComments = 0;\n        this.setState({total: 0, winners: [], stats: [], percentage: 0, processText: 'Loading..', status: 1});\n        let allComments = [];\n        \n        fetch(this.state.url+'.json').then(response => response.json()).then(data => {\n            let comments = data[1].data.children;\n            \n            //keep track of percentage\n            this.totalComments = comments.length;\n            if (comments[comments.length-1].kind === 'more'){\n                this.totalComments += comments[comments.length-1].data.count;\n            }\n\n            let array = [];\n            \n            //add each comments (including replies) to allComments array\n            comments.forEach((comment) => {\n                this.parseChild(comment, allComments, array);\n            });\n                        \n            //if more comments exist, then recursively gather these too\n            // array = [];//REMOVE WHEN DONE TESTING\n            if (array && array.length > 0){\n                let link_id = 't3_'+data[0].data.children[0].data.id;\n                this.getMoreComments(array, link_id, allComments);\n            } else {\n                this.onComplete(allComments);\n            }\n        })\n    }\n    \n    updatePercentage = (comments) => {\n        this.setState({processText: 'Loading - ' + ((comments.length / this.totalComments) * 100).toFixed(0) + '%'});\n    }\n    \n    getMoreComments = (array, link_id, allComments) => {\n        //create string of ids to use with get request\n        let string = '';\n        if (array.length > 0){\n            let subArray = array[0];\n            for (let i = 0; i < 50; i++){\n                if (subArray.length > 0){\n                    string += subArray[0] + ',';\n                    subArray.shift();\n                } else {\n                    //array.shift();\n                    break;\n                }\n            }\n            if (subArray.length === 0) array.shift();\n        }\n        \n        string = string.slice(0,string.length-1);\n        let idsThisTime = string.split(',');\n\n        //use Reddit API to fetch comments based on id strings\n        fetch('https://www.reddit.com/api/morechildren.json?api_type=json&link_id='+link_id+'&children='+string).then(resp => resp.json()).then(data => {\n            let comments = data.json.data.things;\n\n            comments.forEach((comment) => {\n                if (idsThisTime.indexOf(comment.data.id) !== -1) idsThisTime.splice(idsThisTime.indexOf(comment.data.id),1);\n                this.parseChild(comment, allComments, array);\n            });\n            \n            //if comments weren't retrieved, add back to array to try again\n            //if (idsThisTime.length < lengthBefore) array.push(idsThisTime);\n            \n            if (array.length > 0){\n                this.getMoreComments(array, link_id, allComments);\n            } else {\n                this.onComplete(allComments);\n            }\n        });\n    }\n    \n    parseChild = (child, allComments, stringsArr = null) => {\n        if (child.kind === 't1'){\n            let data = child.data;\n            allComments.push(data);\n            this.updatePercentage(allComments);\n            \n            if (typeof data.replies === 'object'){\n                data.replies.data.children.forEach((child) => {\n                    this.parseChild(child, allComments, stringsArr);\n                });\n            }\n        } else if (child.kind === 'more' && stringsArr){\n            stringsArr.push(child.data.children);\n        }\n    }\n    \n    testValue = (value, conditions) => {\n        let match = false;\n        conditions.forEach((condition) => {\n            if (condition.length === 0) return;\n            if (value.indexOf(condition) !== -1) match = true;\n        });\n        return match;\n    }\n    \n    testRegions = (comment, regions, extras, map) => {\n        //first, check value against each region and set to true or false\n        let result = {};\n        Object.keys(regions).forEach((region) => {\n            result[region] = this.testValue(comment.body, regions[region].conditions);\n        });\n        \n        //count how many regions value tested against\n        let count = 0;\n        Object.values(result).forEach((val) => {\n            if (val) count++;\n        });\n        \n        //if multiple regions, put in others array, otherwise put in region array\n        if (count > 1 || count < 1) {\n            extras.others.push(comment);\n        } else {\n            Object.keys(result).forEach((region) => {\n                if (result[region]) {\n                    regions[region].array.push(comment);\n                    map[comment.author] = true;\n                }\n            });\n        }\n    }\n    \n    sortComments = (comments, regions, extras, map) => {\n        let previousWinners = this.state.ignoredUsers;\n        \n        comments.forEach((comment) => {\n            let body = comment.body;\n            let author = comment.author;\n                    \n            //replace commas and new lines with full stop - otherwise affect the csv formatting\n            body = body.replace(/,/g, '. ');\n            body = body.replace(/\\n/g, '. ');\n            \n            //check if author is a previous winner and skip if true\n            if (previousWinners.indexOf(author) !== -1){\n                extras.ignored.push({author, body});\n                return;\n            }\n            \n            //if authors name is unkonwn, add to extras array\n            if (author === '[deleted]'){\n                extras.others.push({author, body});\n                return;\n            }\n            \n            //if author hasn't already posted a comment, then add to correct list\n            if (!map[author]) {\n                this.testRegions({author, body}, regions, extras, map);\n            } else {\n                extras.duplicates.push({author, body});\n            }\n        });\n    };\n    \n    onComplete = (comments) => {        \n        this.comments = comments;\n        this.currentURL = this.state.url;\n        let regions = {};\n        \n        this.state.regions.forEach(region => {\n            if (region.name.length === 0) return;\n            regions[region.name] = {\n                name: region.name,\n                conditions: region.variations,\n                array: [],\n                qty: region.qty\n            };\n        });\n        \n        let extras = {\n            others: [],\n            duplicates: [],\n            ignored: []\n        };\n        \n        let map = {};\n        let downloadData = \"ID,Username,Type,Text\\n\";\n                \n        //loop through each comment posted\n        this.sortComments(comments, regions, extras, map);\n            \n        //convert each list to csv format\n        function parseList(list, type, hasId){\n            type = type[0].toUpperCase() + type.slice(1);\n            list.forEach((item, index) => {\n                hasId ? downloadData += (index+1) + ',' : downloadData += ',';\n                downloadData += item.author + ',' + type + ',' + item.body;\n                downloadData += '\\n';\n            });\n        }\n        \n        let stats = [];\n        let total = 0;\n        \n        //parse all regions and extras\n        Object.values(regions).forEach((region) => {\n            parseList(region.array, region.name, true);\n            stats.push({\n                name: region.name,\n                qty: region.array.length\n            });\n            total += region.array.length;\n        });\n        Object.keys(extras).forEach((extra) => {\n            parseList(extras[extra], extra, false);\n            stats.push({\n                name: extra,\n                qty: extras[extra].length\n            });\n            total += extras[extra].length;\n        });\n        \n        this.results = regions;\n        \n        //pick some winners\n        //this.pickWinners();\n                \n        this.setState({stats, total, status: 0, processText: 'Process', downloadData: encodeURI(downloadData), processBlock: true});\n    }\n    \n    pickWinners = async () => {\n        const winners = [];\n        \n        this.state.regions.forEach(region => {\n            if (region.name.length === 0) return;\n            this.results[region.name].qty = region.qty;\n        });\n        \n        const regions = Object.values(this.results);\n        for await (let region of regions){\n            let obj = {name: region.name, arr: []};\n            let randomNumbers = await this.getRandomNumbers(region.qty, region.array.length);\n            for (let i = 0; i < region.qty; i++){\n                let random = randomNumbers.shift();\n                const chosen = region.array[random];\n                if (chosen) obj.arr.push(chosen);\n            }\n            winners.push(obj);\n        }    \n        \n        this.setState({winners});\n    }\n    \n    getRandomNumbers = async (qty, max) => {\n        // fetching from Random.org\n        this.setState({winnersStatus: 0});\n        try {\n            const resp = await fetch('https://api.random.org/json-rpc/1/invoke', {\n                method: \"POST\",\n                mode: \"cors\",\n                headers: {\n                    \"Content-Type\": \"application/json; charset=utf-8\",\n                },\n                referrer: \"no-referrer\",\n                body: JSON.stringify({\n                    jsonrpc: '2.0',\n                    method: 'generateIntegers',\n                    params: {\n                        apiKey: '68ae5679-2cbb-4b25-8ab0-f0da1a524c21',\n                        n: qty,\n                        min: 1,\n                        max: max\n                    },\n                    id: 1\n                })\n            });\n            const data = await resp.json();\n            \n            this.setState({winnersStatus: 1});\n\n            if (data.error){\n                this.setState({winnersMethod: 'Math.random()'});\n                return this.randomNumberFallback(qty, max);\n            } else {\n                const requestsLeft = data.result.requestsLeft;\n                this.setState({winnersMethod: 'Random.org - Requests remaining: '+requestsLeft});\n                return data.result.random.data;\n            }\n        } catch(err) {\n            this.setState({winnersMethod: 'Math.random()'});\n            this.setState({winnersStatus: 1});\n            return this.randomNumberFallback(qty, max);\n        }\n    };\n    \n    randomNumberFallback = (qty, max) => {\n        let numbers = [];\n        for (let i = 0; i < qty; i++){\n            let random = parseInt(Math.random()*max);\n            while (numbers.includes(random)) random = parseInt(Math.random()*max);\n            numbers.push(random);\n        }\n        return numbers;\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}